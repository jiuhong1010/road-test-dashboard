<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>路测报告管理系统</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- 头部导航 -->
        <header class="header">
            <h1>数据统计 - 路测报告</h1>
        </header>

        <!-- 统计概况区域 -->
        <section class="stats-section">
            <div class="stats-grid">
                <!-- 测试任务数 -->
                <div class="stat-card">
                    <div class="stat-number">1000</div>
                    <div class="stat-label">测试任务数</div>
                </div>

                <!-- 测试版本分布 -->
                <div class="stat-card chart-card">
                    <canvas id="versionChart"></canvas>
                    <div class="chart-label">版本-里程</div>
                </div>

                <!-- 功能模式分布 -->
                <div class="stat-card chart-card">
                    <canvas id="modeChart"></canvas>
                    <div class="chart-label">功能-里程</div>
                </div>

                <!-- 每日测试里程 -->
                <div class="stat-card chart-card-large">
                    <canvas id="dailyMileageChart"></canvas>
                    <div class="chart-label">每日测试里程</div>
                </div>
            </div>
        </section>

        <!-- 筛选器区域 -->
        <section class="filter-section">
            <div class="filter-container">
                <h3>报告列表筛选器</h3>
                <div class="filter-grid">
                    <div class="filter-item">
                        <label>创建人</label>
                        <select id="creatorFilter">
                            <option value="">全部</option>
                            <option value="张三">张三</option>
                            <option value="李四">李四</option>
                            <option value="王五">王五</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>版本</label>
                        <select id="versionFilter">
                            <option value="">全部</option>
                            <option value="v1.0">v1.0</option>
                            <option value="v1.1">v1.1</option>
                            <option value="v2.0">v2.0</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>车辆</label>
                        <select id="vehicleFilter">
                            <option value="">全部</option>
                            <option value="京A12345">京A12345</option>
                            <option value="京B67890">京B67890</option>
                            <option value="沪C11111">沪C11111</option>
                        </select>
                    </div>
                    <div class="filter-item">
                        <label>路线</label>
                        <div class="multi-select-dropdown" id="routeDropdown">
                            <div class="multi-select-button" onclick="toggleDropdown('routeDropdown')">
                                <span id="routeSelected">请选择路线</span>
                                <i class="dropdown-arrow">▼</i>
                            </div>
                            <div class="multi-select-options">
                                <label class="multi-select-option">
                                    <input type="checkbox" value="路线A" onchange="updateMultiSelect('routeDropdown', 'routeSelected')"> 路线A
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="路线B" onchange="updateMultiSelect('routeDropdown', 'routeSelected')"> 路线B
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="路线C" onchange="updateMultiSelect('routeDropdown', 'routeSelected')"> 路线C
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="filter-item">
                        <label>状态</label>
                        <div class="multi-select-dropdown" id="statusDropdown">
                            <div class="multi-select-button" onclick="toggleDropdown('statusDropdown')">
                                <span id="statusSelected">请选择状态</span>
                                <i class="dropdown-arrow">▼</i>
                            </div>
                            <div class="multi-select-options">
                                <label class="multi-select-option">
                                    <input type="checkbox" value="处理中" onchange="updateMultiSelect('statusDropdown', 'statusSelected')"> 处理中
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="成功" onchange="updateMultiSelect('statusDropdown', 'statusSelected')"> 成功
                                </label>
                                <label class="multi-select-option">
                                    <input type="checkbox" value="失败" onchange="updateMultiSelect('statusDropdown', 'statusSelected')"> 失败
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="filter-item filter-actions">
                        <button class="btn-filter" onclick="filterReports()">筛选</button>
                        <button class="btn-reset" onclick="resetFilters()">重置</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 报告列表区域 -->
        <section class="table-section">
            <div class="table-header">
                <h3>报告列表</h3>
                <button class="btn-primary" onclick="openNewReportModal()">新增报告</button>
            </div>
            <div class="table-container">
                <table class="report-table">
                    <thead>
                        <tr>
                            <th>报告ID</th>
                            <th>项目</th>
                            <th>任务名称</th>
                            <th>数据范围</th>
                            <th>测试版本</th>
                            <th>测试车辆</th>
                            <th>路线</th>
                            <th>里程数据</th>
                            <th>状态</th>
                            <th>创建时间</th>
                            <th>生成时间</th>
                            <th>创建人</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="reportTableBody">
                        <!-- 数据将通过 JavaScript 动态填充 -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- 新增报告弹窗 -->
    <div id="newReportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>新增报告</h3>
                <span class="close" onclick="closeNewReportModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="newReportForm">
                    <div class="form-section">
                        <h4>数据筛选器</h4>
                        <div class="form-grid">
                            <div class="form-item">
                                <label>测试版本</label>
                                <div class="multi-select-dropdown" id="modalVersionDropdown">
                                    <div class="multi-select-button" onclick="toggleDropdown('modalVersionDropdown')">
                                        <span id="modalVersionSelected">请选择测试版本</span>
                                        <i class="dropdown-arrow">▼</i>
                                    </div>
                                    <div class="multi-select-options">
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="v1.0" onchange="updateMultiSelect('modalVersionDropdown', 'modalVersionSelected')"> v1.0
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="v1.1" onchange="updateMultiSelect('modalVersionDropdown', 'modalVersionSelected')"> v1.1
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="v2.0" onchange="updateMultiSelect('modalVersionDropdown', 'modalVersionSelected')"> v2.0
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-item">
                                <label>项目</label>
                                <select id="modalProjectFilter">
                                    <option value="">请选择项目</option>
                                    <option value="自动驾驶测试">自动驾驶测试</option>
                                    <option value="路径规划测试">路径规划测试</option>
                                    <option value="安全系统测试">安全系统测试</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label>测试任务</label>
                                <select id="modalTaskFilter">
                                    <option value="">请选择测试任务</option>
                                    <option value="城市道路测试">城市道路测试</option>
                                    <option value="高速公路测试">高速公路测试</option>
                                    <option value="紧急制动测试">紧急制动测试</option>
                                    <option value="夜间道路测试">夜间道路测试</option>
                                    <option value="复杂路况测试">复杂路况测试</option>
                                    <option value="泊车功能测试">泊车功能测试</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label>车牌号</label>
                                <div class="multi-select-dropdown" id="modalVehicleDropdown">
                                    <div class="multi-select-button" onclick="toggleDropdown('modalVehicleDropdown')">
                                        <span id="modalVehicleSelected">请选择车牌号</span>
                                        <i class="dropdown-arrow">▼</i>
                                    </div>
                                    <div class="multi-select-options">
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="京A12345" onchange="updateMultiSelect('modalVehicleDropdown', 'modalVehicleSelected')"> 京A12345
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="京B67890" onchange="updateMultiSelect('modalVehicleDropdown', 'modalVehicleSelected')"> 京B67890
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="沪C11111" onchange="updateMultiSelect('modalVehicleDropdown', 'modalVehicleSelected')"> 沪C11111
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-item">
                                <label>日期时间范围</label>
                                <div class="date-range">
                                    <input type="datetime-local" id="startDateTime" placeholder="开始时间">
                                    <span>至</span>
                                    <input type="datetime-local" id="endDateTime" placeholder="结束时间">
                                </div>
                            </div>
                            <div class="form-item">
                                <label>测试人员</label>
                                <div class="multi-select-dropdown" id="modalTesterDropdown">
                                    <div class="multi-select-button" onclick="toggleDropdown('modalTesterDropdown')">
                                        <span id="modalTesterSelected">请选择测试人员</span>
                                        <i class="dropdown-arrow">▼</i>
                                    </div>
                                    <div class="multi-select-options">
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="张三" onchange="updateMultiSelect('modalTesterDropdown', 'modalTesterSelected')"> 张三
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="李四" onchange="updateMultiSelect('modalTesterDropdown', 'modalTesterSelected')"> 李四
                                        </label>
                                        <label class="multi-select-option">
                                            <input type="checkbox" value="王五" onchange="updateMultiSelect('modalTesterDropdown', 'modalTesterSelected')"> 王五
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeNewReportModal()">取消</button>
                <button class="btn-primary" onclick="confirmNewReport()">确认</button>
            </div>
        </div>
    </div>

    <!-- 报告详情弹窗 -->
    <div id="reportDetailModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>报告详情</h3>
                <span class="close" onclick="closeReportDetailModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="detail-section">
                    <h4>报告基本信息</h4>
                    <div class="detail-grid" id="reportBasicInfo">
                        <!-- 基本信息将通过 JavaScript 动态填充 -->
                    </div>
                </div>
                <div class="detail-section">
                    <h4>报告指标详情</h4>
                    <div class="metrics-container" id="reportMetrics">
                        <!-- 指标详情将通过 JavaScript 动态填充 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>